<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>请在浏览器中打开 · 参与活动</title>
<meta name="color-scheme" content="light dark" />
<style>
  :root{
    --bg:#fff9ef;
    --card:#ffffff;
    --primary:#2466f4;
    --primary-weak:#e8f0ff;
    --accent:#ff7a45;
    --text:#1f2d3d;
    --muted:#6b7280;
    --shadow:0 10px 30px rgba(0,0,0,.08);
    --radius:20px;
  }
  @media (prefers-color-scheme: dark){
    :root{
      --bg:#0f1115; --card:#151821; --text:#e8eaf0; --muted:#98a2b3;
      --primary:#5b8cff; --primary-weak:#1b2a57; --shadow:0 10px 30px rgba(0,0,0,.4);
    }
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"PingFang SC","Hiragino Sans GB","Microsoft YaHei",sans-serif;
    background:var(--bg); color:var(--text); letter-spacing:.2px;
  }

  .wrap{max-width:720px; margin:0 auto; padding: max(16px, env(safe-area-inset-top)) 16px 32px;}

  /* 顶部横幅：完整显示 top.png 并居中 */
  .top-banner{
    width:100%;
    border-radius:20px;
    overflow:hidden;
    box-shadow:var(--shadow);
    background:#dbeafe;
    margin-bottom:16px;
  }
  .top-banner img{
    display:block;
    width:100%;
    height:auto;
    margin:0 auto;
    object-fit:contain;     /* 完整显示 */
    object-position:center; /* 水平居中 */
  }

  .title{
    margin:18px 6px 10px; display:flex; align-items:center; gap:8px; flex-wrap:wrap;
    font-weight:800; font-size:22px; line-height:1.25; letter-spacing:.3px;
  }
  .badge{
    display:inline-block; padding:4px 10px; border-radius:999px;
    background:var(--primary-weak); color:var(--primary); font-weight:700; font-size:12px;
  }

  .card{
    background:var(--card); border-radius:var(--radius); box-shadow:var(--shadow);
    padding:18px 16px; margin-top:14px;
  }
  .desc{ font-size:15.5px; line-height:1.8; }
  .desc b{ color:var(--accent); }

  /* 中间 loading 动画（loading.gif） */
  .loading-box{ display:flex; justify-content:center; align-items:center; margin:14px 0 8px; }
  .loading-box img{ width:120px; height:auto; image-rendering:-webkit-optimize-contrast; }

  .btns{ display:flex; gap:12px; margin:18px 0 6px; flex-wrap:wrap; }
  .btn{
    appearance:none; border:0; cursor:pointer; padding:12px 16px; border-radius:14px;
    font-weight:700; font-size:15px; transition:transform .08s ease, box-shadow .2s ease, background .2s ease;
    box-shadow:0 6px 18px rgba(36,102,244,.18);
  }
  .btn:active{ transform:translateY(1px); }
  .btn.primary{ background:var(--primary); color:#fff; }
  .btn.ghost{ background:transparent; color:var(--primary); border:1px solid var(--primary); }
  .btn.copy{ background:var(--primary-weak); color:var(--primary); box-shadow:none; }

  .small{ font-size:13px; color:var(--muted); }
  .mono{
    display:block; margin-top:8px; padding:12px 14px; word-break:break-all;
    background:rgba(0,0,0,.04); border-radius:12px;
    font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace; font-size:13.5px;
  }

  .footer{ margin-top:26px; text-align:center; color:var(--muted); font-size:12.5px; }
  .toast{
    position:fixed; left:50%; bottom:24px; transform:translateX(-50%);
    background:rgba(0,0,0,.85); color:#fff; padding:10px 14px; border-radius:12px;
    font-size:13px; opacity:0; pointer-events:none; transition:opacity .2s ease, transform .2s ease;
  }
  .toast.show{ opacity:1; transform:translateX(-50%) translateY(-6px); }
  .safe{ height:8px; }
</style>
</head>
<body>
  <div class="wrap">
    <!-- 顶部横幅：根目录 top.png -->
    <figure class="top-banner">
      <img src="./top.png" alt="请在浏览器中打开 - 指引图" loading="eager" fetchpriority="high">
    </figure>

    <div class="title">
      请在浏览器中打开 <span class="badge">推荐</span>
    </div>

    <section class="card" aria-labelledby="guide-title">
      <h2 id="guide-title" style="position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden;">打开方式指引</h2>

      <!-- 中间 loading：根目录 loading.gif -->
      <div class="loading-box" aria-hidden="true">
        <img src="./loading.gif" alt="加载中">
      </div>

      <p class="desc">
        因 <b>微信/QQ 内置浏览器</b> 对本活动页支持有限，<br>
        请点击右上角 “<b>···</b>” → 选择 <b>在浏览器中打开</b>。
      </p>

      <div class="btns">
        <button id="btn-mtt" class="btn ghost">在 QQ 浏览器中打开</button>
        <button id="btn-default" class="btn primary">用默认浏览器打开</button>
        <button id="btn-copy" class="btn copy">复制链接</button>
      </div>

      <div class="small">或将下方链接复制到浏览器打开：</div>
      <code id="plain-link" class="mono">https://luckcode-deploy-ashuang.replit.app/</code>
    </section>

    <div class="footer">© Dreammore Burger · 长沙汉堡节</div>
    <div id="toast" class="toast">已复制到剪贴板</div>
    <div class="safe"></div>
  </div>

<script>
  const target = "https://luckcode-deploy-ashuang.replit.app/";

  (function autoJump(){
    const ua = navigator.userAgent.toLowerCase();
    const isQQ = ua.includes('qq/');
    const isWX = ua.includes('micromessenger');
    if(!isQQ && !isWX){
      location.replace(target);
    } else {
      document.getElementById('plain-link').textContent = target;
    }
  })();

  const toast = (txt)=>{
    const el = document.getElementById('toast');
    el.textContent = txt || '已复制到剪贴板';
    el.classList.add('show');
    setTimeout(()=>el.classList.remove('show'), 1500);
  };

  document.getElementById('btn-mtt').addEventListener('click', (e)=>{
    e.preventDefault();
    const scheme = 'mttbrowser://url=' + encodeURIComponent(target);
    const a = document.createElement('a');
    a.style.display='none'; a.href = scheme; document.body.appendChild(a); a.click();
    setTimeout(()=>{ location.href = target; }, 2200);
  });

  document.getElementById('btn-default').addEventListener('click', (e)=>{
    e.preventDefault();
    location.href = target;
  });

  document.getElementById('btn-copy').addEventListener('click', async ()=>{
    try{
      await navigator.clipboard.writeText(target);
      toast('链接已复制，去外部浏览器粘贴打开');
    }catch(err){
      const sel = window.getSelection();
      const range = document.createRange();
      const node = document.getElementById('plain-link');
      range.selectNodeContents(node); sel.removeAllRanges(); sel.addRange(range);
      try{ document.execCommand('copy'); toast(); }catch(e){ toast('复制失败
