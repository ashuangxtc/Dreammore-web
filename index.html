<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>请使用浏览器打开 - Dreammore</title>
  <style>
    body,html{width:100%;height:100%;margin:0;padding:0;background:#fffbe6;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif}
    .container {text-align:center;padding:40px 20px;}
    .loader {width:320px;margin:50px auto 70px;position:relative;margin-top:120px;}
    .loading-1 {margin:0 auto;position:relative;width:70%;height:10px;border:1px solid #69d2e7;border-radius:10px;animation:turn 4s linear 1.75s infinite;}
    .loading-1:before{content:"";display:block;position:absolute;width:0;height:100%;background:#69d2e7;box-shadow:10px 0 15px 0 #69d2e7;animation:load 2s linear infinite;}
    .loading-2{width:100%;position:absolute;top:20px;color:#69d2e7;font-size:18px;text-align:center;animation:bounce 2s linear infinite;}
    @keyframes load{0%{width:0}87.5%,100%{width:100%}}
    @keyframes turn{0%{transform:rotateY(0deg)}6.25%,50%{transform:rotateY(180deg)}56.25%,100%{transform:rotateY(360deg)}}
    @keyframes bounce{0%,100%{top:10px}12.5%{top:30px}}
    .tip {font-size:18px;color:#333;margin-top:18px}
    .btn {display:inline-block;padding:10px 18px;border-radius:20px;margin:10px 6px;text-decoration:none;font-weight:600}
    .btn-primary{color:#2466f4;border:1px solid #2466f4;background:#fff}
    .btn-secondary{color:#fff;background:#2466f4;border:1px solid #2466f4}
    .foot {font-size:14px;color:#666;margin-top:16px}
  </style>
</head>
<body>
  <div class="container">
    <div style="background:url('https://img.alicdn.com/imgextra/i3/2200638895580/O1CN01awiCFw1r5gfyRJf65_!!2200638895580.png') center top/contain no-repeat; padding-top:60px;">
      <div class="loader">
        <a style="display:none" id="vurl" href="#" rel="noreferrer"></a>
        <div class="loading-1"></div>
        <div class="loading-2">
          因 QQ/微信 内置浏览器对本站支持欠佳<br/>
          请点击右上角 “···” → 选择【在浏览器中打开】<br/>
        </div>
      </div>

      <div class="tip">你也可以尝试下面按钮直接打开（部分手机/浏览器支持）</div>

      <div style="margin-top:18px">
        <!-- 这些 scheme 不是保证全部生效，取决于设备/浏览器支持 -->
        <a id="open-mtt" class="btn btn-primary" href="#">在 QQ 浏览器中打开</a>
        <a id="open-browser" class="btn btn-secondary" href="#">用默认浏览器打开</a>
      </div>

      <div class="foot">或复制下面链接到浏览器打开：<br/>
        <code id="plain-link">https://luckcode-deploy-ashuang.replit.app/</code>
      </div>
    </div>
  </div>

  <script>
    // 目标地址（你的 Replit 活动页）
    var target = "https://luckcode-deploy-ashuang.replit.app/";

    // 帮助函数：设置隐式跳转链接并触发点击
    function openu(scheme) {
      var a = document.getElementById('vurl');
      a.href = scheme;
      try { a.click(); } catch (e) { window.location = scheme; }
    }

    // 按钮处理：尝试以不同 scheme 打开（注意：不保证生效）
    document.getElementById('open-mtt').addEventListener('click', function(e){
      e.preventDefault();
      // mttbrowser QQ 内核唤起（有些 QQ 版本支持）
      openu("mttbrowser://url=" + encodeURIComponent(target));
      // 作为回退，5 秒后在新的窗口打开普通链接（可选）
      setTimeout(function(){ window.location.href = target; }, 2500);
    });

    document.getElementById('open-browser').addEventListener('click', function(e){
      e.preventDefault();
      // 尝试唤起通用浏览器协议（多个尝试）
      // 这里只做最通用的回退：直接打开目标链接
      window.location.href = target;
    });

    // 自动在非微信/QQ 浏览器中直接跳转到目标（和 PHP 逻辑一致）
    (function(){
      var ua = navigator.userAgent || "";
      ua = ua.toLowerCase();
      // 判断是否是微信或 QQ 内置浏览器
      var isQQ = ua.indexOf('qq/') > -1;
      var isWeChat = ua.indexOf('micromessenger') > -1;
      if (!isQQ && !isWeChat) {
        // 不是微信/QQ -> 直接跳转到目标页面
        window.location.href = target;
      } else {
        // 在微信/QQ 内置浏览器中，显示指引（页面已显示）
        // 同时把 plain link 放入可复制区域
        document.getElementById('plain-link').textContent = target;
      }
    })();
  </script>
</body>
</html>
